package userOperations;

import java.io.IOException;
import java.util.Scanner;

import businessLogic.AddNewFile;
import businessLogic.DeleteFile;
import businessLogic.ListOfAvailableFiles;
import businessLogic.SearchForFile;

public class AllOperations {

	public static void displayUserOptions() {
		System.out.println("********************************************************" + "\r\n"
				+ "Enter 1 to view all available files\r\n" + "Enter 2 to add a file\r\n"
				+ "Enter 3 to delete a file\r\n" + "Enter 4 to search a file\r\n"
				+ "Enter 5 to exit from file operation");
	}

	public static void displayAvailableFiles() {
		ListOfAvailableFiles lf = new ListOfAvailableFiles();
		try {
			lf.showAllAvailableFiles();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			System.out.println("Error Occured " + e.getMessage());
		}
	}

	public static void addNewFileByUser(String FileName) {
		AddNewFile adnf = new AddNewFile();
		try {
			adnf.addFile(FileName);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			System.out.println("Error occured " + e.getMessage());
		}
	}

	public static void deleteFileByUser(String fileName) {
		DeleteFile df = new DeleteFile();
		df.deleteFile(fileName);
	}

	public static void searchFileByUserInput(String fileToSearch) {
		SearchForFile sf = new SearchForFile();
		sf.searchFile(fileToSearch);
	}

	public static void performCasesOnUserInput() {

		displayUserOptions();
		Scanner sc = new Scanner(System.in);
		Scanner sc1 = new Scanner(System.in);
		Scanner sc2 = new Scanner(System.in);
		Scanner sc3 = new Scanner(System.in);
		String userInput = sc.nextLine();
		// sc.close();
		if (userInput.equals("1")) {
			displayAvailableFiles();
			// displayUserOptions();
			performCasesOnUserInput();
		} else if (userInput.equals("2")) {
			//Scanner sc1 = new Scanner(System.in);
			System.out.println(
					"**Note : a. As of now any text, special character or even speces are allowed as file name. "
							+ "\r\n Somehow it will be restricted in later updates of the app");
			System.out.println(
					"b. File names are of lower cases, for example if you added Demo.txt it will be maintained as demo.txt");
			System.out.println("Enter the file name that you want to create : ");
			String fileNameUserInput = sc1.nextLine();
			if (fileNameUserInput.contains(".")) {
				System.out.println("Files are of .txt type by default,"
						+ "\r\n you are not required to enter any type format(i.e .txt, .docx, .pdf etc)");
				performCasesOnUserInput();
			} else {
				addNewFileByUser(fileNameUserInput);
				performCasesOnUserInput();
			}
		} else if (userInput.equals("3")) {
			Scanner sc2 = new Scanner(System.in);
			System.out.println("Enter the file name you want to delete : ");
			String fileToDeleteUserInput = sc2.nextLine();
			if (fileToDeleteUserInput.contains(".")) {
				System.out.println("Files are of .txt type by default,"
						+ "\r\n you are not required to enter any type format(i.e .txt, .docx, .pdf etc)");
				performCasesOnUserInput();
			} else {
				deleteFileByUser(fileToDeleteUserInput);
				performCasesOnUserInput();
			}

		} else if (userInput.equals("4")) {
			Scanner sc3 = new Scanner(System.in);
			System.out.println("Enter the file name you want to search : ");
			String searchFile = sc3.nextLine();
			searchFileByUserInput(searchFile);
			performCasesOnUserInput();
		}
		else if(userInput.equals("5")){
			System.out.println("Exiting file operations");
			sc1.close();
			sc2.close();
			sc3.close();
			initialOperations();
			
		}
		else {
			System.out.println("Wrong Input !! Please try again");
			performCasesOnUserInput();
		}

	}

	public void mainMenu() {
        //AllOperations alp = new AllOperations();
		initialOperations();
		
	}
	
	public static void initialOperations(){
		System.out.println("Enter 'Y' to see file operations menu" + 
	"\nEnter 'N' to exit from the app");
		Scanner inp = new Scanner(System.in);
		String userInput = inp.nextLine();
		switch (userInput) {
		case "Y":
			performCasesOnUserInput();
			break;
		case "N":
			System.out.println("Bye Bye !!");
			inp.close();
			break;
		default:
			System.out.println("Wrong Input !! Please try again");
			initialOperations();
	 }
	}
}
